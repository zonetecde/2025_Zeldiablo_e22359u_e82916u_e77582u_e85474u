@startuml
title Diagramme de séquence - Détection joueur sur case d'ouverture et ouverture de porte

actor "Joueur" as J
participant "Labyrinthe" as L
participant "CaseOuverture" as CO
participant "CasePorte" as CP

J -> L : deplacerPerso(direction, joueur)
activate L

L -> L : getSuivant(y, x, direction)
L -> L : canEntityMoveTo(i, j)
L -> L : setY(nouvelle_y)
L -> L : setX(nouvelle_x)
L -> L : getCase(y, x)

L -> CO : onStepOn(joueur)
activate CO

CO -> CO : action.run()
note right : action = ouvrirPorte (Runnable)

CO -> CP : ouvrir()
activate CP

CP -> CP : setOuverte(true)
CP -> CP : setCouleur(Color.WHITE)
CP -> CP : setIsWalkable(true)

deactivate CP

deactivate CO

deactivate L

@enduml
